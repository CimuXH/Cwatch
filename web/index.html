<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Short Video App (Mock) - Dark Mode</title>
    <link rel="stylesheet" href="./css/styles.css" />
</head>
<body>
<!-- 顶部栏 -->
<header class="topbar">
    <div class="topbar__left">
        <div class="brand">
            <span class="brand__dot"></span>
            <span class="brand__text">Cwatch</span>
        </div>
    </div>

    <div class="topbar__right">
        <button class="icon-button" id="btnHome" title="回到首页预览" aria-label="Home">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M3 10.5 12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-7H9v7H4a1 1 0 0 1-1-1v-10.5Z"
                      stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
            </svg>
        </button>

        <div class="avatar-wrapper">
            <div class="avatar" title="用户头像" aria-label="User Avatar">
                <span>U</span>
            </div>
            <!-- 用户下拉菜单 -->
            <div class="avatar-dropdown" id="avatarDropdown" hidden>
                <div class="avatar-dropdown__item" id="dropdownUserInfo">
                    <span class="avatar-dropdown__icon">👤</span>
                    <span class="avatar-dropdown__text">个人信息</span>
                </div>
                <div class="avatar-dropdown__divider"></div>
                <div class="avatar-dropdown__item avatar-dropdown__item--danger" id="dropdownLogout">
                    <span class="avatar-dropdown__icon">🚪</span>
                    <span class="avatar-dropdown__text">退出登录</span>
                </div>
            </div>
        </div>
    </div>
</header>

<div class="layout">
    <!-- 左侧导航栏（新） -->
    <aside class="sidebar" aria-label="Side Navigation">
        <button class="sidebar__item sidebar__item--active" id="navExplore" title="发现">
            <span class="sidebar__icon">⌂</span>
            <span class="sidebar__label">发现</span>
        </button>

        <button class="sidebar__item" id="navUpload" title="上传（占位）">
            <span class="sidebar__icon">⤴</span>
            <span class="sidebar__label">上传</span>
        </button>

        <button class="sidebar__item" id="navFav" title="收藏（占位）">
            <span class="sidebar__icon">★</span>
            <span class="sidebar__label">收藏</span>
        </button>

        <button class="sidebar__item" id="navSetting" title="设置（占位）">
            <span class="sidebar__icon">⚙</span>
            <span class="sidebar__label">设置</span>
        </button>

        <div class="sidebar__spacer"></div>

        <div class="sidebar__hint">
            <div class="sidebar__hint-title">Tips</div>
            <div class="sidebar__hint-text">首页点击缩略图进入播放</div>
        </div>
    </aside>

    <!-- 主内容区 -->
    <main class="main">
        <!-- 预览首页（默认显示，不自动播放） -->
        <section id="previewPage" class="page page--active" aria-label="Preview Page">
            <div class="page__header">
                <h1 class="page__title">发现</h1>
                <p class="page__subtitle">点击任意视频进入全屏瀑布流播放</p>
            </div>

            <section id="previewGrid" class="preview-grid" aria-label="Preview Grid">
                <!-- JS 渲染 -->
            </section>
        </section>

        <!-- 播放页（点击缩略图后进入） -->
        <section id="playerPage" class="page" aria-label="Player Page">
            <section id="feed" class="feed" aria-label="Video Feed">
                <!-- JS 渲染 -->
            </section>

            <div class="hint" id="hint">
                <span class="hint__kbd">Space</span> 播放/暂停 · 双击点赞 · 上滑/下滑切换
            </div>
        </section>
    </main>
</div>

<!-- 弹层遮罩 -->
<div id="sheetMask" class="sheet-mask" hidden></div>

<!-- 登录注册页面（弹窗形式） -->
<section id="authPage" class="auth-page" hidden>
    <div class="auth-container">
        <!-- 关闭按钮 -->
        <button class="auth-close" id="authClose" aria-label="关闭">✕</button>
        
        <div class="auth-header">
            <div class="brand brand--large">
                <span class="brand__dot"></span>
                <span class="brand__text">Cwatch</span>
            </div>
            <p class="auth-subtitle">欢迎来到畅看视频平台</p>
        </div>

        <!-- 登录表单 -->
        <form id="loginForm" class="auth-form">
            <h2 class="auth-title">登录</h2>
            <div class="auth-field">
                <label class="auth-label">用户名</label>
                <input type="text" id="loginUsername" class="auth-input" placeholder="请输入用户名" required />
            </div>
            <div class="auth-field">
                <label class="auth-label">密码</label>
                <input type="password" id="loginPassword" class="auth-input" placeholder="请输入密码" required />
            </div>
            <button type="submit" class="auth-button">登录</button>
            <p class="auth-switch">
                还没有账号？<a href="#" id="showRegister">立即注册</a>
            </p>
        </form>

        <!-- 注册表单 -->
        <form id="registerForm" class="auth-form" hidden>
            <h2 class="auth-title">注册</h2>
            <div class="auth-field">
                <label class="auth-label">用户名</label>
                <input type="text" id="registerUsername" class="auth-input" placeholder="请输入用户名" required />
            </div>
            <div class="auth-field">
                <label class="auth-label">密码</label>
                <input type="password" id="registerPassword" class="auth-input" placeholder="请输入密码（至少6位）" required minlength="6" />
            </div>
            <div class="auth-field">
                <label class="auth-label">确认密码</label>
                <input type="password" id="registerPasswordConfirm" class="auth-input" placeholder="请再次输入密码" required />
            </div>
            <button type="submit" class="auth-button">注册</button>
            <p class="auth-switch">
                已有账号？<a href="#" id="showLogin">立即登录</a>
            </p>
        </form>
    </div>
</section>

<!-- 评论弹层 -->
<section id="commentSheet" class="sheet" role="dialog" aria-label="Comments" aria-modal="true" hidden>
    <header class="sheet__header">
        <div class="sheet__title">评论</div>
        <button class="sheet__close" data-sheet-close aria-label="Close">✕</button>
    </header>
    <div class="sheet__body">
        <div id="commentList" class="comment-list"></div>
    </div>
    <footer class="sheet__footer">
        <input id="commentInput" class="sheet__input" placeholder="说点什么…" />
        <button id="commentSend" class="sheet__send">发送</button>
    </footer>
</section>

<!-- 分享弹层 -->
<section id="shareSheet" class="sheet" role="dialog" aria-label="Share" aria-modal="true" hidden>
    <header class="sheet__header">
        <div class="sheet__title">分享</div>
        <button class="sheet__close" data-sheet-close aria-label="Close">✕</button>
    </header>
    <div class="sheet__body">
        <div class="share-grid" id="shareGrid"></div>
        <div class="share-copy">
            <input id="shareLink" class="share-copy__input" readonly />
            <button id="copyBtn" class="share-copy__btn">复制链接</button>
        </div>
    </div>
</section>

<!-- 视频上传弹窗 -->
<section id="uploadModal" class="upload-modal" hidden>
    <div class="upload-modal__backdrop"></div>
    <div class="upload-modal__content">
        <header class="upload-modal__header">
            <h2 class="upload-modal__title">上传视频</h2>
            <button class="upload-modal__close" id="uploadModalClose">✕</button>
        </header>
        
        <div class="upload-modal__body">
            <!-- 选择文件区域 -->
            <div class="upload-dropzone" id="uploadDropzone">
                <div class="upload-dropzone__icon">📹</div>
                <div class="upload-dropzone__text">拖拽视频到这里，或点击选择</div>
                <div class="upload-dropzone__hint">支持 MP4, WebM, MOV, AVI, MKV（最大500MB）</div>
                <input type="file" id="uploadFileInput" accept=".mp4,.webm,.mov,.avi,.mkv" hidden />
            </div>
            
            <!-- 文件信息（选择文件后显示） -->
            <div class="upload-file-info" id="uploadFileInfo" hidden>
                <div class="upload-file-info__preview">
                    <video id="uploadVideoPreview" muted></video>
                </div>
                <div class="upload-file-info__details">
                    <div class="upload-file-info__name" id="uploadFileName"></div>
                    <div class="upload-file-info__size" id="uploadFileSize"></div>
                    <button class="upload-file-info__change" id="uploadChangeFile">更换文件</button>
                </div>
            </div>
            
            <!-- 视频标题输入 -->
            <div class="upload-field">
                <label class="upload-label">视频标题</label>
                <input type="text" id="uploadTitle" class="upload-input" placeholder="给视频起个标题吧" maxlength="100" />
            </div>
            
            <!-- 上传进度 -->
            <div class="upload-progress" id="uploadProgress" hidden>
                <div class="upload-progress__bar">
                    <div class="upload-progress__fill" id="uploadProgressFill"></div>
                </div>
                <div class="upload-progress__text" id="uploadProgressText">准备上传...</div>
            </div>
        </div>
        
        <footer class="upload-modal__footer">
            <button class="upload-btn upload-btn--cancel" id="uploadCancel">取消</button>
            <button class="upload-btn upload-btn--submit" id="uploadSubmit" disabled>上传视频</button>
        </footer>
    </div>
</section>

<script src="./js/app.js"></script>
</body>
</html>
